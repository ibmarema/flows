[{"type":"tab","label":"Send Push Message","id":"3d0ee685.c2f11a"},{"id":"7220e09f.c2de08","type":"github-credentials","z":"","name":"ibmarema"},{"id":"cd82bc7.3cf4c4","type":"inject","z":"3d0ee685.c2f11a","name":"Start Workflow","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":140,"y":180,"wires":[["9e1c610f.16f12"]]},{"id":"9e1c610f.16f12","type":"template","z":"3d0ee685.c2f11a","name":"Input XML as Template","field":"payload","fieldType":"msg","format":"handlebars","template":"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<admira version=\"2.2.0\" type=\"variables\">\n    <properties id=\"template_variables\">\n        <param name=\"file\">.mxf</param>\n        <param name=\"path\">/import/src1/</param>\n        <param name=\"filename\">video.mp4</param>\n    </properties>\n</admira>","x":326,"y":81,"wires":[["91fdaf37.e606e8"]]},{"id":"91fdaf37.e606e8","type":"job_start","z":"3d0ee685.c2f11a","name":"push_demo","title":"Send a push message","priority":"500","searchTag1":"","searchTag2":"","searchTag3":"","searchTagInt1":"123","searchTagInt2":"123","searchTagInt3":"123","searchTagDate1":"2016-03-12T10:10:10","searchTagDate2":"2016-03-12T10:10:10","searchTagDate3":"2016-03-12T10:10:10","x":490,"y":180,"wires":[["304fc19d.0476c6"]]},{"id":"304fc19d.0476c6","type":"job_vars","z":"3d0ee685.c2f11a","variables":[{"k":"push_msg_title","v":"This is my push title"},{"k":"Push_msg_detail","v":"This is my push detail"}],"x":700,"y":180,"wires":[["93046f20.39c57"]]},{"id":"47261151.4a7c28","type":"job_end","z":"3d0ee685.c2f11a","includeparameters":true,"x":1180,"y":300,"wires":[["25cb82a6.7b48ce"]]},{"id":"25cb82a6.7b48ce","type":"debug","z":"3d0ee685.c2f11a","name":"","active":true,"console":"false","complete":"false","x":1375,"y":329,"wires":[]},{"id":"93046f20.39c57","type":"external_command","z":"3d0ee685.c2f11a","name":"Send_Push_Message","title":"Send a Push Message to the AREMA Event App","exec_name":"/home/dmae/admira/bin/ec_send_push_message","source_filenames":"","target_filenames":"","additional_parameters":"$push_msg_title","org_unit":"admira","chmod_file":"","hold_in_cache":"no","x":940,"y":220,"wires":[["47261151.4a7c28"]]},{"id":"4c6844a0.4af9f4","type":"flow-reader","z":"3d0ee685.c2f11a","name":"Save Flow to GitHub","protocol":"http","url":"127.0.0.1:1880","sheet":"Send Push Message","auth":false,"once":false,"x":198,"y":679,"wires":[["a0a82953.ff2678"]]},{"id":"a0a82953.ff2678","type":"function","z":"3d0ee685.c2f11a","name":"Set Filename","func":"msg.filename = \"/home/dmae/git/\" + msg.payload[0].label.split(' ').join('_') + \".json\";\nmsg.filename_wo_path = msg.payload[0].label.split(' ').join('_') + \".json\";\nmsg.flowid = msg.payload[0].id;\n\nreturn msg;\n","outputs":1,"noerr":0,"x":448,"y":679,"wires":[["a419c164.649a1","c9ffcd2b.639778"]]},{"id":"a419c164.649a1","type":"file","z":"3d0ee685.c2f11a","name":"Save Flow as File","filename":"","appendNewline":true,"createDir":false,"overwriteFile":"true","x":668,"y":679,"wires":[]},{"id":"ddbf2697.fee098","type":"exec","z":"3d0ee685.c2f11a","command":"/home/dmae/.node-red/git_commit","addpay":true,"append":"","useSpawn":"","name":"Push to Git","x":1090,"y":740,"wires":[[],["26e7573d.dd243"],[]]},{"id":"26e7573d.dd243","type":"debug","z":"3d0ee685.c2f11a","name":"Git Result","active":true,"console":"false","complete":"payload","x":1280,"y":740,"wires":[]},{"id":"347b4fdc.557228","type":"function","z":"3d0ee685.c2f11a","name":"Set commit message","func":"var commit = \"\\\"my commit message 2\\\"\";\n\nmsg.payload = msg.filename_wo_path + \" \" + commit\n\nreturn msg;","outputs":1,"noerr":0,"x":860,"y":740,"wires":[["ddbf2697.fee098"]]},{"id":"c9ffcd2b.639778","type":"delay","z":"3d0ee685.c2f11a","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":640,"y":740,"wires":[["347b4fdc.557228"]]}]
